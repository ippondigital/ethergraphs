'use strict';

var Slug = require('../lib/slug.js');

module.exports = function(test) {
    Slug.generate().then(function(slug) {
        console.log('JSON: ' + slug.json());
        console.log('Slug: ' + slug.encode());
        console.log('Size: ' + slug.encode().length);
        var slug2 = Slug.parse(slug.encode());
        test.equal(slug.filenames.length, slug2.filenames.length, 'Encoded and decoded file count differ.')
        slug.filenames.forEach(function(filename) {
            test.ok(Buffer.compare(slug.getData(filename), slug2.getData(filename)) === 0, 'Encoded and decoded file contents differ');
        });
        test.done();
    }, function(error) {
        console.log('b', error);
    });
}

module.exports.testSelf = module.exports;
